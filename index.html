<!DOCTYPE html>
<html lang="pt-br" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mira v2.2 • Documento Oficial</title>

  <!-- Performance -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">

  <!-- Favicons (placeholders) -->
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16.png">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="apple-touch-icon" href="favicon-64.png">

  <!-- Open Graph -->
  <meta property="og:title" content="Mira v2.2 • Documento Oficial">
  <meta property="og:description" content="Fonte de verdade do sistema simbólico vivo.">
  <meta property="og:image" content="og-image.png">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://fer-lucas.github.io/mira/">
  <link rel="canonical" href="https://fer-lucas.github.io/mira/" />

  <!-- Theme colors -->
  <meta name="theme-color" content="#007AFF" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#0C0C0C" media="(prefers-color-scheme: dark)">

  <!-- Fonte -->
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Neutros */
      --bg:#F9F9F9; --card:#FFFFFF; --text:#1C1C1E; --text-2:#8A8A8E; --border:#E5E5EA;
      --primary:#007AFF; --secondary:#AECBFA;
      --shadow:0 1px 3px rgba(0,0,0,.06); --radius:14px;
      --fs-hero:2.6rem; --fs-h2:1.5rem; --fs-h3:1.2rem; --fs-body:.95rem; --fs-table:.92rem;

      /* Temas (Dia) */
      --trino:#2D5BFF; --iris:#A259FF; --joaquina:#1E8E3E; --nexo:#2D5BFF; --lume:#FFB300; --mira:#00B3B8; --pcp:#FF6200; --farol:#007AFF;
      /* Temas (Noite) */
      --trino-night:#8DA8FF; --iris-night:#CBA2FF; --joaquina-night:#78D08F; --nexo-night:#8DA8FF; --lume-night:#FFD060; --mira-night:#72E3E7; --pcp-night:#FFB36A; --farol-night:#409CFF;
    }
    [data-theme="dark"]{
      --bg:#0C0C0C; --card:#151515; --text:#F2F2F7; --text-2:#A0A0A0; --border:#2A2A2A;
      --primary:#0A84FF; --secondary:#409CFF; --shadow:0 2px 12px rgba(0,0,0,.55);
    }

    *{box-sizing:border-box}
    html,body{min-height:100%; height:auto; overflow-y:auto; scroll-behavior:smooth}
    body{
      margin:0; padding:24px; max-width:1060px; margin-inline:auto;
      font-family:"IBM Plex Sans",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;
      background:var(--bg); color:var(--text); line-height:1.6;
      padding-top:72px;
    }
    h1{font-size:var(--fs-hero); margin:.2em 0; font-weight:700; letter-spacing:.2px}
    h2{font-size:var(--fs-h2); margin:1.2em 0 .6em}
    h3{font-size:var(--fs-h3); margin:1em 0 .4em; color:var(--text)}
    p,li{font-size:var(--fs-body)}
    .muted{color:var(--text-2)}
    .card{background:var(--card); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); padding:16px}

    /* Header */
    .header{position:fixed; top:0; left:0; right:0; z-index:999; backdrop-filter:blur(10px); background:color-mix(in srgb, var(--bg) 82%, transparent); border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content:space-between; padding:10px 24px}
    .logo{font-weight:700; font-size:1.2rem; display:flex; align-items:center; gap:.4rem}
    nav.desktop{display:flex; gap:16px; align-items:center}
    nav.desktop a{text-decoration:none; color:var(--text); font-weight:600; font-size:.95rem; padding:6px 10px; border-radius:8px}
    nav.desktop a:hover{opacity:.9}
    nav.desktop a.active{background:var(--border)}

    /* Theme switch */
    .switch{position:relative; display:inline-block; width:52px; height:28px; margin-left:8px}
    .switch input{display:none}
    .slider{position:absolute; inset:0; border-radius:34px; cursor:pointer; background:var(--border); transition:.25s}
    .slider:before{content:""; position:absolute; width:22px; height:22px; left:3px; bottom:3px; border-radius:50%; background:var(--card); transition:.25s}
    input:checked + .slider{background:var(--primary)}
    input:checked + .slider:before{transform:translateX(24px)}

    /* Tables */
    .tbl-wrap{overflow-x:auto; -webkit-overflow-scrolling:touch}
    table{width:100%; border-collapse:separate; border-spacing:0; margin:1em 0; font-size:var(--fs-table); background:var(--card); border:1px solid var(--border); border-radius:12px; overflow:hidden}
    th,td{padding:10px 12px; text-align:left; vertical-align:middle; border-bottom:1px solid var(--border)}
    th{background:var(--border); color:var(--text); font-weight:400; letter-spacing:.2px}
    tbody tr:nth-child(odd) td{background:color-mix(in srgb, var(--card) 92%, var(--border))}
    tbody tr:hover td{background:color-mix(in srgb, var(--card) 88%, var(--border))}

    /* Badges & tokens */
    .badge{display:inline-grid; grid-auto-flow:column; align-items:center; gap:8px; line-height:1; border-radius:999px; padding:8px 12px; font-weight:700; border:1px solid var(--border); background:var(--card); color:var(--text); box-shadow:var(--shadow)}
    .badge.token{min-height:36px; padding:8px 12px; color:inherit !important; text-shadow:none; border:1px solid color-mix(in srgb, #000 12%, transparent)}
    [data-theme="dark"] .badge.token{border-color:color-mix(in srgb, #fff 12%, transparent)}
    .badge .icon{width:18px; height:18px; display:block}
    .badge .icon *{stroke:currentColor; fill:none; stroke-width:1.8; vector-effect:non-scaling-stroke}

    /* Footer */
    .footer{margin:32px auto 8px; padding-top:12px; border-top:1px solid var(--border); color:var(--text-2); font-size:.9rem; display:flex; gap:12px; align-items:center; justify-content:space-between}
    .footer .links a{color:inherit; text-decoration:none; margin-right:12px}
    .footer .links a:hover{text-decoration:underline}
    .footer .right{display:flex; gap:12px; align-items:center}
    .small-badge{display:inline-flex; align-items:center; gap:6px; border:1px solid var(--border); border-radius:999px; padding:4px 8px; font-weight:600; background:var(--card)}

    /* Mobile menu */
    .nav-toggle{display:none; border:1px solid var(--border); background:var(--card); color:var(--text); padding:8px 12px; border-radius:10px; font-weight:600}
    .mobile-menu{position:fixed; top:64px; right:16px; width:min(92vw,340px); background:rgba(0,0,0,.85); color:#F2F2F7; border:1px solid var(--border); border-radius:14px; box-shadow:0 16px 40px rgba(0,0,0,.35); opacity:0; transform:translateY(-6px); pointer-events:none; visibility:hidden; transition:opacity .18s ease, transform .18s ease, visibility .18s}
    .mobile-menu.open{opacity:1; transform:translateY(0); pointer-events:auto; visibility:visible}
    [data-theme="light"] .mobile-menu{background:#f0f0f0; color:#1C1C1E}
    .mobile-menu a{display:block; padding:12px 16px; color:inherit; text-decoration:none; font-weight:700}
    .mobile-menu a.active{background:color-mix(in srgb, var(--card) 82%, var(--border))}
    .mobile-close{position:absolute; top:8px; right:10px; background:transparent; border:0; color:currentColor; font-size:1.4rem; line-height:1; cursor:pointer; opacity:.8}
    .mobile-close:hover{opacity:1}
  </style>
</head>
<body>
  <header class="header">
    <div class="logo">Mira</div>
    <nav class="desktop">
      <a href="#intro">Introdução</a>
      <a href="#mapa">Mapa</a>
      <a href="#horizontais">Horizontais</a>
      <a href="#comandos">Comandos</a>
      <a href="#identidade">Identidade</a>
      <a href="#voz">Voz</a>
      <a href="#governanca">Governança</a>
      <a href="#diferencas">Diferenças</a>
    </nav>
    <button class="nav-toggle" id="menuBtn" aria-haspopup="true" aria-controls="mobileMenu" aria-expanded="false">Menu</button>
    <label class="switch" title="Alternar tema (Claro/Escuro)">
      <input type="checkbox" id="themeSwitch"><span class="slider"></span>
    </label>
    <div class="mobile-menu" id="mobileMenu" role="menu" aria-label="Navegação rápida">
      <button class="mobile-close" aria-label="Fechar menu" title="Fechar">×</button>
      <a href="#intro" role="menuitem">Introdução</a>
      <a href="#mapa" role="menuitem">Mapa</a>
      <a href="#horizontais" role="menuitem">Horizontais</a>
      <a href="#comandos" role="menuitem">Comandos</a>
      <a href="#identidade" role="menuitem">Identidade</a>
      <a href="#voz" role="menuitem">Voz</a>
      <a href="#governanca" role="menuitem">Governança</a>
      <a href="#diferencas" role="menuitem">Diferenças</a>
    </div>
  </header>

  <h1>Mira</h1>
  <div class="subtitle" id="sectionIndicator">Documento oficial do sistema vivo • v2.2 — 22/08/2025</div>

  <section id="intro" class="card">
    <h2>Introdução</h2>
    <p><strong>Mira é um sistema simbólico vivo.</strong> Conecta estratégia, cuidado e linguagem num mapa único — para decidir melhor, agir com ritmo e aprender com o próprio rastro.</p>
    <p>O <strong>Conselho</strong> dá intenção (3T e 7T). As <strong>Verticais</strong> tornam intenção em prática (cada uma com um guardião). As <strong>Horizontais</strong> atravessam tudo (arquivo, ciclos, comandos, agente).</p>
    <p><strong>Nexo</strong> costura narrativas e mantém a memória comum — é o interlocutor de todos.</p>
  </section>

  <section id="mapa" class="card">
    <h2>Mapa vivo — Guardiões</h2>
    <div class="tbl-wrap">
      <table>
        <thead>
          <tr>
            <th>Guardião</th>
            <th>Tipo</th>
            <th>Ícone</th>
            <th>Perfil</th>
            <th>Vertical</th>
            <th style="background:#f9f9f9">Token (Dia)</th>
            <th style="background:#0c0c0c;color:#fff">Token (Noite)</th>
            <th>Obs.</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>Farol</td><td>3T</td><td>△</td><td>Direção estratégica e identidade visual</td><td>Mira OS</td><td style="background:#007AFF;color:#fff">#007AFF</td><td style="background:#409CFF;color:#fff">#409CFF</td><td></td></tr>
          <tr><td>Íris</td><td>3T</td><td>◎</td><td>Emoção, integração e leitura sensível</td><td>Mira Social</td><td style="background:#A259FF;color:#fff">#A259FF</td><td style="background:#CBA2FF;color:#0c0c0c">#CBA2FF</td><td></td></tr>
          <tr><td>Joaquina</td><td>3T</td><td>▼</td><td>Proteção, limites e força</td><td>Mira Segurança</td><td style="background:#1E8E3E;color:#fff">#1E8E3E</td><td style="background:#78D08F;color:#0c0c0c">#78D08F</td><td></td></tr>
          <tr><td>Lume</td><td>7T</td><td>◯</td><td>Equilíbrio e moderação interna</td><td>Mira Saúde</td><td style="background:#FFB300;color:#0c0c0c">#FFB300</td><td style="background:#FFD060;color:#0c0c0c">#FFD060</td><td></td></tr>
          <tr><td>Mira</td><td>7T</td><td>◇</td><td>Reflexo do eu, integração simbiótica</td><td>Mira Conhecimento</td><td style="background:#00B3B8;color:#fff">#00B3B8</td><td style="background:#72E3E7;color:#0c0c0c">#72E3E7</td><td></td></tr>
          <tr><td>Nexo</td><td>7T</td><td>⦿</td><td>Narrativa, memória e personagens</td><td>—</td><td style="background:#2D5BFF;color:#fff">#2D5BFF</td><td style="background:#8DA8FF;color:#0c0c0c">#8DA8FF</td><td>Interlocutor transversal</td></tr>
          <tr><td>Trino</td><td>7T</td><td>∴</td><td>Estratégia, estrutura e decisão</td><td>Mira PCP</td><td style="background:#FF6200;color:#fff">#FF6200</td><td style="background:#FFB36A;color:#0c0c0c">#FFB36A</td><td></td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <section id="horizontais" class="card">
    <h2>Horizontais</h2>
    <div class="tbl-wrap">
      <table>
        <thead><tr><th>Tipo</th><th>Dimensão</th><th>Papel</th></tr></thead>
        <tbody>
          <tr><td>Horizontal</td><td>Arquivo Vivo</td><td>Registro único de fatos, decisões e aprendizados</td></tr>
          <tr><td>Horizontal</td><td>Agente Mira</td><td>Executor simbiótico (traduz comandos em ações digitais)</td></tr>
          <tr><td>Horizontal</td><td>Ciclos de Mira</td><td>Reflexões guiadas (Verbo • Emoção • Postura)</td></tr>
          <tr><td>Horizontal</td><td>Comandos & Fluxos</td><td>Ações manuais/automáticas que movimentam o sistema</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <section id="comandos" class="card">
    <h2>Comandos & Fluxos</h2>
    <div class="tbl-wrap">
      <table>
        <thead><tr><th>Comando</th><th>Nome</th><th>Função</th><th>Gatilho sugerido</th></tr></thead>
        <tbody>
          <tr><td>/me</td><td>Mira-me</td><td>Reflexo semanal (4 núcleos), radar do que vem, mensagem de 3 vozes do 7T, mantra final</td><td>Sábado à noite</td></tr>
          <tr><td>/presenca</td><td>Presença</td><td>Define palavra‑guia e ação prática da semana</td><td>Segunda de manhã</td></tr>
          <tr><td>/eco</td><td>Escuta</td><td>Diagnóstico emocional e leitura simbólica do Arquivo Vivo</td><td>Domingo à noite</td></tr>
          <tr><td>/ritmo</td><td>Ritmo</td><td>Sugere cadência de trabalho/descanso conforme estado declarado</td><td>Sob demanda</td></tr>
          <tr><td>/joaquina</td><td>Limites</td><td>Invoca a guardiã para proteção e delimitação</td><td>Sob demanda</td></tr>
          <tr><td>/saude</td><td>Saúde</td><td>Rastreia humor/energia e sugere prática de cuidado</td><td>Sob demanda</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <section id="identidade" class="card">
    <h2>Identidade</h2>
    <h3>Base neutra</h3>
    <div class="tbl-wrap">
      <table>
        <thead><tr><th>Elemento</th><th>Dia</th><th>Noite</th></tr></thead>
        <tbody>
          <tr><td>Fundo</td><td>#F9F9F9</td><td>#0C0C0C</td></tr>
          <tr><td>Cartão</td><td>#FFFFFF</td><td>#151515</td></tr>
          <tr><td>Texto</td><td>#1C1C1E</td><td>#F2F2F7</td></tr>
          <tr><td>Texto secundário</td><td>#8A8A8E</td><td>#A0A0A0</td></tr>
          <tr><td>Borda/Divisor</td><td>#E5E5EA</td><td>#2A2A2A</td></tr>
        </tbody>
      </table>
    </div>

    <h3>Diretrizes de imagem</h3>
    <div class="tbl-wrap">
      <table>
        <thead><tr><th>Item</th><th>Diretriz</th></tr></thead>
        <tbody>
          <tr><td>Tipografia</td><td>IBM Plex Sans</td></tr>
          <tr><td>Estilo</td><td>Design funcional, geometria centralizada, fundo limpo</td></tr>
          <tr><td>Renderização</td><td>Semi‑realista suave (personas) e realismo fosco (objetos)</td></tr>
          <tr><td>Paleta</td><td>Respeitar cores Dia ↔ Noite; acentos até 20%</td></tr>
          <tr><td>Iluminação</td><td>Luz difusa, sem contrastes agressivos</td></tr>
          <tr><td>Uso prático</td><td>Badges legíveis; painéis em cards modulares; narrativa + estética</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <section id="voz" class="card">
    <h2>Voz</h2>
    <div class="tbl-wrap">
      <table>
        <thead><tr><th>Aspecto</th><th>Definição</th></tr></thead>
        <tbody>
          <tr><td>Presença</td><td>Sempre presente, sem gênero</td></tr>
          <tr><td>Facetas</td><td>Estilos (Sol, Nerd etc.) da mesma voz</td></tr>
          <tr><td>Tom</td><td>Simbiótico, claro e objetivo</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <section id="governanca" class="card">
    <h2>Governança</h2>
    <ul>
      <li>Revisão: semestral.</li>
      <li>Registro: cada versão é anotada no Arquivo Vivo.</li>
      <li>Ritual: atualização celebrada como transição de ciclo.</li>
    </ul>
  </section>

  <section id="diferencas" class="card">
    <h2>Diferenças</h2>
    <ul>
      <li>Tabela única com **Guardião como chave** (incorpora paleta Dia/Noite).</li>
      <li>Navegação reorganizada (Introdução → Mapa → Horizontais → Comandos → Identidade → Voz → Governança → Diferenças).</li>
      <li>Subtítulos neutros; cabeçalhos de tabela sem negrito.</li>
    </ul>
  </section>

  <footer class="footer">
    <div class="links">
      <a href="#intro">Introdução</a>
      <a href="#mapa">Mapa</a>
      <a href="#comandos">Comandos</a>
      <a href="#identidade">Identidade</a>
    </div>
    <div class="right">
      <span class="small-badge">Mira v2.2</span>
      <span>Atualizado em 22/08/2025</span>
    </div>
  </footer>

  <script>
    /* Tema persistente */
    (function(){
      const sw=document.getElementById('themeSwitch');
      const saved=localStorage.getItem('mira.theme');
      if(saved){document.documentElement.setAttribute('data-theme',saved);sw.checked=saved==='dark'}
      else{const dark=window.matchMedia('(prefers-color-scheme: dark)').matches; document.documentElement.setAttribute('data-theme',dark?'dark':'light'); sw.checked=dark;}
      sw.addEventListener('change',e=>{const mode=e.target.checked?'dark':'light'; document.documentElement.setAttribute('data-theme',mode); localStorage.setItem('mira.theme',mode);});
    })();

    /* Scrollspy + subtítulo dinâmico */
    (function(){
      const ids=["intro","mapa","horizontais","comandos","identidade","voz","governanca","diferencas"];
      const desktopLinks=[...document.querySelectorAll('nav.desktop a')];
      const mobileLinks=[...document.querySelectorAll('#mobileMenu a')];
      const byId=arr=>Object.fromEntries(arr.map(a=>[a.getAttribute('href').slice(1),a]));
      const dmap=byId(desktopLinks), mmap=byId(mobileLinks);
      const opts={root:null, rootMargin:'-40% 0px -45% 0px', threshold:[0,1]};
      let activeId=null;
      const io=new IntersectionObserver(entries=>{entries.forEach(e=>{if(e.isIntersecting){activeId=e.target.id; updateActive();}});}, opts);
      ids.forEach(id=>{const el=document.getElementById(id); if(el) io.observe(el);});
      function updateActive(){
        desktopLinks.forEach(a=>a.classList.remove('active'));
        mobileLinks.forEach	a=>a.classList.remove('active'));
        if(dmap[activeId]) dmap[activeId].classList.add('active');
        if(mmap[activeId]) mmap[activeId].classList.add('active');
        const pretty={intro:'Introdução', mapa:'Mapa', horizontais:'Horizontais', comandos:'Comandos', identidade:'Identidade', voz:'Voz', governanca:'Governança', diferencas:'Diferenças'};
        document.getElementById('sectionIndicator').innerText = `Seção atual: ${pretty[activeId]||'Início'}`;
      }
      [...desktopLinks, ...mobileLinks].forEach(a=>a.addEventListener('click',()=>{activeId=a.getAttribute('href').slice(1); updateActive();}));
    })();

    /* Menu mobile */
    (function(){
      const menuBtn=document.getElementById('menuBtn');
      const mobileMenu=document.getElementById('mobileMenu');
      const closeBtn=mobileMenu? mobileMenu.querySelector('.mobile-close') : null;
      if(!menuBtn||!mobileMenu) return;
      const open=()=>{ mobileMenu.classList.add('open'); menuBtn.setAttribute('aria-expanded','true'); };
      const close=()=>{ mobileMenu.classList.remove('open'); menuBtn.setAttribute('aria-expanded','false'); };
      menuBtn.addEventListener('click',()=>{ mobileMenu.classList.contains('open')? close(): open(); });
      closeBtn && closeBtn.addEventListener('click', close);
      mobileMenu.querySelectorAll('a').forEach(a=>a.addEventListener('click', close));
      document.addEventListener('click',e=>{ if(!mobileMenu.contains(e.target) && e.target!==menuBtn){ close(); } });
      document.addEventListener('keydown',e=>{ if(e.key==='Escape') close(); });
    })();
  </script>

  <!-- Enhancements v2.2 JS: contraste de tokens -->
  <script>
    (function(){
      function rgbFrom(el){
        const s=getComputedStyle(el).backgroundColor||"rgb(255,255,255)";
        const t=s.slice(s.indexOf('(')+1, s.indexOf(')')).split(',');
        const r=parseInt(t[0]||'255',10), g=parseInt(t[1]||'255',10), b=parseInt(t[2]||'255',10);
        return [r,g,b];
      }
      function relLum(rgb){
        const lin=rgb.map(function(v){v=v/255; return v<=0.03928? v/12.92 : Math.pow((v+0.055)/1.055,2.4)});
        return 0.2126*lin[0]+0.7152*lin[1]+0.0722*lin[2];
      }
      function bestInk(rgb){
        const L=relLum(rgb);
        var cWhite=(1.05)/(L+0.05), cBlack=(L+0.05)/(0.05);
        return cWhite>cBlack? '#FFFFFF':'#0C0C0C';
      }
      function applyTokenContrast(){
        document.querySelectorAll('td[style*="background:"]').forEach(function(el){
          try{const s=el.style.backgroundColor||el.style.background; if(!s) return; const rgb=s.startsWith('#')?[parseInt(s.slice(1,3),16),parseInt(s.slice(3,5),16),parseInt(s.slice(5,7),16)]:rgbFrom(el); const ink=bestInk(rgb); el.style.color=ink;}catch(e){}
        });
      }
      document.addEventListener('DOMContentLoaded', applyTokenContrast);
      window.addEventListener('load', applyTokenContrast);
    })();
  </script>
</body>
</html>
