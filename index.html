<!DOCTYPE html>
<html lang="pt-br" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mira v2.3 • Documento Oficial</title>

  <!-- Tipografia -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* ------------------------------
       TOKENS DE COR (OKLCH + fallback)
       ------------------------------ */
    :root{
      /* Fallback HSL */
      --farol-dia:hsl(60 90% 70%);    --farol-noite:hsl(210 100% 65%);
      --iris-dia:hsl(20 90% 60%);     --iris-noite:hsl(20 80% 75%);
      --joaquina-dia:hsl(350 70% 30%);--joaquina-noite:hsl(140 45% 60%);
      --lume-dia:hsl(180 30% 55%);    --lume-noite:hsl(180 35% 70%);
      --mira-dia:hsl(280 40% 80%);    --mira-noite:hsl(190 60% 70%);
      --nexo-dia:hsl(120 40% 50%);    --nexo-noite:hsl(220 70% 75%);
      --trino-dia:hsl(240 55% 40%);   --trino-noite:hsl(240 65% 70%);

      /* Base UI (fallback) */
      --bg:#f6f6f7; --card:#ffffff; --fg:#111; --muted:#d9d9de; --muted-2:#bfc0c4; --border:#e5e5ea;
      --elev:0 1px 2px rgba(0,0,0,.05);
    }
    @supports (color: oklch(50% 0.2 0)){
      :root{
        --farol-dia:oklch(82% 0.25 90);   --farol-noite:oklch(70% 0.18 230);
        --iris-dia:oklch(72% 0.32 28);    --iris-noite:oklch(80% 0.18 28);
        --joaquina-dia:oklch(38% 0.25 20);--joaquina-noite:oklch(72% 0.12 150);
        --lume-dia:oklch(62% 0.10 190);   --lume-noite:oklch(76% 0.08 190);
        --mira-dia:oklch(86% 0.12 270);   --mira-noite:oklch(78% 0.11 210);
        --nexo-dia:oklch(56% 0.18 140);   --nexo-noite:oklch(80% 0.12 230);
        --trino-dia:oklch(48% 0.18 250);  --trino-noite:oklch(76% 0.14 250);

        --bg:oklch(98% 0.002 250); --card:oklch(100% 0 0); --fg:oklch(18% 0.02 250);
        --muted:oklch(90% 0.01 250); --muted-2:oklch(75% 0.02 250); --border:oklch(88% 0.01 250);
      }
    }

    /* Mapeamento automático Dia/Noite → tokens ativos */
    :root{ /* light */
      --farol:var(--farol-dia); --iris:var(--iris-dia); --joaquina:var(--joaquina-dia);
      --lume:var(--lume-dia); --mira:var(--mira-dia); --nexo:var(--nexo-dia); --trino:var(--trino-dia);
    }
    [data-theme="dark"]{ /* dark */
      --bg:#111214; --card:#16171a; --fg:#f2f2f4; --muted:#2a2b2f; --muted-2:#3a3b3f; --border:#2a2b2f;
      --farol:var(--farol-noite); --iris:var(--iris-noite); --joaquina:var(--joaquina-noite);
      --lume:var(--lume-noite); --mira:var(--mira-noite); --nexo:var(--nexo-noite); --trino:var(--trino-noite);
      --elev:0 8px 24px rgba(0,0,0,.45);
    }

    /* ------------------------------
       BASE
       ------------------------------ */
    *{box-sizing:border-box}
    html,body{min-height:100%;height:auto}
    body{margin:0;background:var(--bg);color:var(--fg);font:15px/1.5 "IBM Plex Sans", ui-sans-serif, system-ui; padding:24px; max-width:1060px; margin-inline:auto; padding-top:80px}
    h1{font-size:2.2rem;margin:.2em 0 .4em;font-weight:700}
    h2{font-size:1.4rem;margin:1.2em 0 .6em;font-weight:600}
    h3{font-size:1.1rem;margin:1em 0 .4em;font-weight:600;color:var(--fg)}
    p,li{font-size:0.95rem}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:var(--elev);padding:16px}
    .muted{color:var(--muted-2)}

    /* Header refinado (sem negrito exagerado) */
    .header{position:fixed;top:0;left:0;right:0;z-index:20;backdrop-filter:blur(10px);
      background:color-mix(in oklab, var(--bg), transparent 20%);border-bottom:1px solid var(--border)}
    .header-inner{max-width:1060px;margin:0 auto;display:flex;align-items:center;gap:14px;padding:10px 24px}
    .logo{font-weight:700; letter-spacing:.2px}
    nav.desktop{display:flex;gap:10px;align-items:center}
    nav.desktop a{all:unset;cursor:pointer;padding:8px 10px;border-radius:10px;font-weight:500;color:var(--fg)}
    nav.desktop a:hover{background:color-mix(in oklab, var(--card), var(--border) 35%)}
    nav.desktop a.active{position:relative;background:color-mix(in oklab, var(--card), var(--border) 55%);box-shadow:inset 0 -2px 0 color-mix(in oklab, var(--trino), black 10%)}

    /* Toggle tema */
    .switch{position:relative;display:inline-block;width:50px;height:26px}
    .switch input{display:none}
    .slider{position:absolute;inset:0;border-radius:999px;background:var(--border);transition:.25s}
    .slider:before{content:"";position:absolute;width:20px;height:20px;left:3px;top:3px;border-radius:50%;background:var(--card);transition:.25s;box-shadow:0 1px 2px rgba(0,0,0,.25)}
    input:checked + .slider{background:var(--nexo)}
    input:checked + .slider:before{transform:translateX(24px)}

    /* Tabelas */
    .tbl-wrap{overflow-x:auto;-webkit-overflow-scrolling:touch}
    table{width:100%;border-collapse:separate;border-spacing:0;margin:1em 0;font-size:.92rem;background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden}
    th,td{padding:10px 12px;text-align:left;vertical-align:middle;border-bottom:1px solid var(--border)}
    th{background:var(--border);font-weight:500;color:var(--fg)}
    tbody tr:nth-child(odd) td{background:color-mix(in oklab, var(--card), var(--border) 14%)}
    tbody tr:hover td{background:color-mix(in oklab, var(--card), var(--border) 24%)}

    /* Badges */
    .badge{display:inline-grid;grid-auto-flow:column;align-items:center;gap:8px;line-height:1;border:1px solid var(--border);border-radius:999px;padding:8px 12px;font-weight:700}

    /* Footer */
    .footer{margin:32px auto 8px;padding-top:12px;border-top:1px solid var(--border);color:var(--muted-2);font-size:.9rem;display:flex;gap:12px;align-items:center;justify-content:space-between}
    .footer .links a{color:inherit;text-decoration:none;margin-right:12px}
    .footer .links a:hover{text-decoration:underline}

    /* Mobile menu mínimo */
    .nav-toggle{display:none}
    @media (max-width:560px){
      .nav-toggle{display:inline-block;border:1px solid var(--border);background:var(--card);color:var(--fg);padding:6px 10px;border-radius:10px;font-weight:600}
      nav.desktop{display:none}
    }
  </style>
</head>
<body>
  <header class="header" id="topo">
    <div class="header-inner">
      <div class="logo">Mira</div>
      <nav class="desktop">
        <a href="#intro">Introdução</a>
        <a href="#mapa">Mapa</a>
        <a href="#horizontais">Horizontais</a>
        <a href="#comandos">Comandos</a>
        <a href="#identidade">Identidade</a>
        <a href="#voz">Voz</a>
        <a href="#governanca">Governança</a>
        <a href="#diferencas">Diferenças</a>
      </nav>
      <label class="switch" title="Alternar tema (Claro/Escuro)">
        <input type="checkbox" id="themeSwitch"><span class="slider"></span>
      </label>
    </div>
  </header>

  <h1>Mira</h1>
  <div class="subtitle muted" id="sectionIndicator">Documento oficial do sistema vivo • v2.3 — 22/08/2025</div>

  <!-- Introdução -->
  <section id="intro" class="card">
    <h2>Introdução</h2>
    <p><strong>Mira é um sistema simbólico vivo.</strong> Conecta estratégia, cuidado e linguagem num mapa único — para decidir melhor, agir com ritmo e aprender com o próprio rastro.</p>
    <p>O <strong>Conselho</strong> dá intenção (3T e 7T). As <strong>Verticais</strong> tornam intenção em prática (cada uma com um guardião). As <strong>Horizontais</strong> atravessam tudo (arquivo, ciclos, comandos, agente).</p>
    <p><strong>Nexo</strong> costura narrativas e mantém a memória comum — interlocutor de todos.</p>
  </section>

  <!-- Mapa unificado com Guardião como chave e tokens OKLCH -->
  <section id="mapa" class="card">
    <h2>Mapa vivo — Guardiões</h2>
    <div class="tbl-wrap">
      <table>
        <thead>
          <tr>
            <th>Guardião</th>
            <th>Tipo</th>
            <th>Ícone</th>
            <th>Perfil</th>
            <th>Vertical</th>
            <th>Token (Dia)</th>
            <th>Token (Noite)</th>
            <th>Obs.</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>Farol</td><td>3T</td><td>△</td><td>Direção estratégica e identidade visual</td><td>Mira OS</td><td style="background:var(--farol);color:#111">var(--farol-dia)</td><td style="background:var(--farol-noite);color:#111">var(--farol-noite)</td><td></td></tr>
          <tr><td>Íris</td><td>3T</td><td>◎</td><td>Emoção, integração e leitura sensível</td><td>Mira Social</td><td style="background:var(--iris);color:#fff">var(--iris-dia)</td><td style="background:var(--iris-noite);color:#111">var(--iris-noite)</td><td></td></tr>
          <tr><td>Joaquina</td><td>3T</td><td>▼</td><td>Proteção, limites e força</td><td>Mira Segurança</td><td style="background:var(--joaquina);color:#fff">var(--joaquina-dia)</td><td style="background:var(--joaquina-noite);color:#111">var(--joaquina-noite)</td><td></td></tr>
          <tr><td>Lume</td><td>7T</td><td>◯</td><td>Equilíbrio e moderação interna</td><td>Mira Saúde</td><td style="background:var(--lume);color:#111">var(--lume-dia)</td><td style="background:var(--lume-noite);color:#111">var(--lume-noite)</td><td></td></tr>
          <tr><td>Mira</td><td>7T</td><td>◇</td><td>Reflexo do eu, integração simbiótica</td><td>Mira Conhecimento</td><td style="background:var(--mira);color:#111">var(--mira-dia)</td><td style="background:var(--mira-noite);color:#111">var(--mira-noite)</td><td></td></tr>
          <tr><td>Nexo</td><td>7T</td><td>⦿</td><td>Narrativa, memória e personagens</td><td>—</td><td style="background:var(--nexo);color:#fff">var(--nexo-dia)</td><td style="background:var(--nexo-noite);color:#111">var(--nexo-noite)</td><td>Interlocutor transversal</td></tr>
          <tr><td>Trino</td><td>7T</td><td>∴</td><td>Estratégia, estrutura e decisão</td><td>Mira PCP</td><td style="background:var(--trino);color:#fff">var(--trino-dia)</td><td style="background:var(--trino-noite);color:#111">var(--trino-noite)</td><td></td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Horizontais -->
  <section id="horizontais" class="card">
    <h2>Horizontais</h2>
    <div class="tbl-wrap">
      <table>
        <thead><tr><th>Tipo</th><th>Dimensão</th><th>Papel</th></tr></thead>
        <tbody>
          <tr><td>Horizontal</td><td>Arquivo Vivo</td><td>Registro único de fatos, decisões e aprendizados</td></tr>
          <tr><td>Horizontal</td><td>Agente Mira</td><td>Executor simbiótico (traduz comandos em ações digitais)</td></tr>
          <tr><td>Horizontal</td><td>Ciclos de Mira</td><td>Reflexões guiadas (Verbo • Emoção • Postura)</td></tr>
          <tr><td>Horizontal</td><td>Comandos & Fluxos</td><td>Ações manuais/automáticas que movimentam o sistema</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Comandos -->
  <section id="comandos" class="card">
    <h2>Comandos & Fluxos</h2>
    <div class="tbl-wrap">
      <table>
        <thead><tr><th>Comando</th><th>Nome</th><th>Função</th><th>Gatilho sugerido</th></tr></thead>
        <tbody>
          <tr><td>/me</td><td>Mira-me</td><td>Reflexo semanal (4 núcleos), radar do que vem, 3 vozes do 7T, mantra</td><td>Sábado à noite</td></tr>
          <tr><td>/presenca</td><td>Presença</td><td>Define palavra‑guia e ação prática da semana</td><td>Segunda de manhã</td></tr>
          <tr><td>/eco</td><td>Escuta</td><td>Diagnóstico emocional e leitura simbólica do Arquivo Vivo</td><td>Domingo à noite</td></tr>
          <tr><td>/ritmo</td><td>Ritmo</td><td>Cadência de trabalho/descanso conforme estado</td><td>Sob demanda</td></tr>
          <tr><td>/joaquina</td><td>Limites</td><td>Invoca proteção e delimitação</td><td>Sob demanda</td></tr>
          <tr><td>/saude</td><td>Saúde</td><td>Rastreia humor/energia + prática de cuidado</td><td>Sob demanda</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Identidade -->
  <section id="identidade" class="card">
    <h2>Identidade</h2>
    <h3>Base neutra</h3>
    <div class="tbl-wrap">
      <table>
        <thead><tr><th>Elemento</th><th>Dia</th><th>Noite</th></tr></thead>
        <tbody>
          <tr><td>Fundo</td><td>#f6f6f7</td><td>#111214</td></tr>
          <tr><td>Cartão</td><td>#ffffff</td><td>#16171a</td></tr>
          <tr><td>Texto</td><td>#111</td><td>#f2f2f4</td></tr>
          <tr><td>Borda</td><td>#e5e5ea</td><td>#2a2b2f</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Voz -->
  <section id="voz" class="card">
    <h2>Voz</h2>
    <div class="tbl-wrap">
      <table>
        <thead><tr><th>Aspecto</th><th>Definição</th></tr></thead>
        <tbody>
          <tr><td>Presença</td><td>Sempre presente, sem gênero</td></tr>
          <tr><td>Facetas</td><td>Estilos (Sol, Nerd etc.) da mesma voz</td></tr>
          <tr><td>Tom</td><td>Simbiótico, claro e objetivo</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Governança -->
  <section id="governanca" class="card">
    <h2>Governança</h2>
    <ul>
      <li>Revisão: semestral</li>
      <li>Registro: cada versão no Arquivo Vivo</li>
      <li>Ritual: atualização como transição de ciclo</li>
    </ul>
  </section>

  <!-- Diferenças -->
  <section id="diferencas" class="card">
    <h2>Diferenças</h2>
    <ul>
      <li>Tabela única (Guardião como chave) com **tokens OKLCH** (Dia/Noite).</li>
      <li>Toggle de tema corrigido (mapeamento automático Dia/Noite).</li>
      <li>Cabeçalho refinado: peso 500, realce ativo com sombra interna.</li>
    </ul>
  </section>

  <!-- Rodapé -->
  <footer class="footer">
    <div class="links">
      <a href="#intro">Introdução</a>
      <a href="#mapa">Mapa</a>
      <a href="#comandos">Comandos</a>
      <a href="#identidade">Identidade</a>
    </div>
    <div>v2.3 • 22/08/2025</div>
  </footer>

  <script>
    /* Persistência do tema + inicialização conforme prefers-color-scheme */
    (function(){
      const sw=document.getElementById('themeSwitch');
      const saved=localStorage.getItem('mira.theme');
      const prefersDark=window.matchMedia('(prefers-color-scheme: dark)').matches;
      const mode=saved ? saved : (prefersDark ? 'dark':'light');
      document.documentElement.setAttribute('data-theme', mode);
      if(sw) sw.checked=(mode==='dark');
      sw && sw.addEventListener('change', e=>{
        const m=e.target.checked?'dark':'light';
        document.documentElement.setAttribute('data-theme', m);
        localStorage.setItem('mira.theme', m);
      });
    })();

    /* Scrollspy simples → adiciona .active no nav e atualiza subtítulo */
    (function(){
      const ids=['intro','mapa','horizontais','comandos','identidade','voz','governanca','diferencas'];
      const links=[...document.querySelectorAll('nav.desktop a')];
      const map=Object.fromEntries(links.map(a=>[a.getAttribute('href').slice(1), a]));
      const opts={root:null,rootMargin:'-45% 0px -45% 0px',threshold:0};
      const pretty={intro:'Introdução', mapa:'Mapa', horizontais:'Horizontais', comandos:'Comandos', identidade:'Identidade', voz:'Voz', governanca:'Governança', diferencas:'Diferenças'};
      let active=null;
      const io=new IntersectionObserver(entries=>{
        entries.forEach(e=>{
          if(e.isIntersecting){ active=e.target.id; update(); }
        });
      }, opts);
      ids.forEach(id=>{const el=document.getElementById(id); el && io.observe(el)});
      function update(){
        links.forEach(a=>a.classList.remove('active'));
        map[active] && map[active].classList.add('active');
        const ind=document.getElementById('sectionIndicator');
        ind && (ind.textContent = `Seção atual: ${pretty[active]||'Início'}`);
      }
    })();
  </script>
</body>
</html>
